{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "import-toolbar-button",
  "type": "registry:ui",
  "title": "Import Toolbar Button",
  "description": "A toolbar button to import editor content from a file.",
  "dependencies": [
    "use-file-picker@2.1.2"
  ],
  "registryDependencies": [
    "dropdown-menu",
    "https://platejs.org/r/toolbar"
  ],
  "files": [
    {
      "path": "src/registry/ui/import-toolbar-button.tsx",
      "content": "'use client';\n\nimport * as React from 'react';\n\nimport type { DropdownMenuProps } from '@radix-ui/react-dropdown-menu';\n\nimport { importDocx, importHtml, importMarkdown } from '@platejs/docx-io';\nimport { ArrowUpToLineIcon } from 'lucide-react';\nimport { useEditorRef } from 'platejs/react';\nimport { toast } from 'sonner';\nimport { useFilePicker } from 'use-file-picker';\n\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\n\nimport { ToolbarButton } from './toolbar';\n\ntype ImportType = 'docx' | 'html' | 'markdown';\n\nexport function ImportToolbarButton(props: DropdownMenuProps) {\n  const editor = useEditorRef();\n  const [open, setOpen] = React.useState(false);\n\n  const handleImport = React.useCallback(\n    async (file: File, type: ImportType) => {\n      try {\n        if (type === 'docx') {\n          const arrayBuffer = await file.arrayBuffer();\n          const result = await importDocx(editor, arrayBuffer);\n\n          if (result.warnings.length > 0) {\n            console.warn('DOCX import warnings:', result.warnings);\n          }\n\n          editor.tf.insertNodes(result.nodes);\n\n          if (result.comments.length > 0) {\n            console.info(\n              `DOCX contains ${result.comments.length} comments (not imported)`\n            );\n          }\n\n          toast.success('DOCX file imported successfully');\n        } else if (type === 'html') {\n          const text = await file.text();\n          const result = importHtml(editor, text);\n          editor.tf.insertNodes(result.nodes);\n          toast.success('HTML file imported successfully');\n        } else if (type === 'markdown') {\n          const text = await file.text();\n          const result = importMarkdown(editor, text);\n          editor.tf.insertNodes(result.nodes);\n          toast.success('Markdown file imported successfully');\n        }\n      } catch (error) {\n        console.error('Import error:', error);\n        toast.error('Failed to import file');\n      }\n    },\n    [editor]\n  );\n\n  const { openFilePicker: openDocxFilePicker } = useFilePicker({\n    accept: ['.docx'],\n    multiple: false,\n    onFilesSelected: async ({ plainFiles }) => {\n      await handleImport(plainFiles[0], 'docx');\n    },\n  });\n\n  const { openFilePicker: openHtmlFilePicker } = useFilePicker({\n    accept: ['text/html'],\n    multiple: false,\n    onFilesSelected: async ({ plainFiles }) => {\n      await handleImport(plainFiles[0], 'html');\n    },\n  });\n\n  const { openFilePicker: openMdFilePicker } = useFilePicker({\n    accept: ['.md', '.mdx'],\n    multiple: false,\n    onFilesSelected: async ({ plainFiles }) => {\n      await handleImport(plainFiles[0], 'markdown');\n    },\n  });\n\n  return (\n    <DropdownMenu open={open} onOpenChange={setOpen} modal={false} {...props}>\n      <DropdownMenuTrigger asChild>\n        <ToolbarButton pressed={open} tooltip=\"Import\" isDropdown>\n          <ArrowUpToLineIcon className=\"size-4\" />\n        </ToolbarButton>\n      </DropdownMenuTrigger>\n\n      <DropdownMenuContent align=\"start\">\n        <DropdownMenuGroup>\n          <DropdownMenuItem onSelect={() => openDocxFilePicker()}>\n            Import from DOCX\n          </DropdownMenuItem>\n\n          <DropdownMenuItem onSelect={() => openHtmlFilePicker()}>\n            Import from HTML\n          </DropdownMenuItem>\n\n          <DropdownMenuItem onSelect={() => openMdFilePicker()}>\n            Import from Markdown\n          </DropdownMenuItem>\n        </DropdownMenuGroup>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n",
      "type": "registry:ui"
    }
  ],
  "meta": {
    "docs": [
      {
        "route": "/docs/import",
        "title": "Import"
      }
    ],
    "examples": [
      "basic-nodes-demo"
    ],
    "label": "New"
  }
}