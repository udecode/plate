{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "code-drawing-node",
  "type": "registry:ui",
  "title": "Code Drawing Node",
  "description": "Create diagrams from code using PlantUML, Graphviz, Flowchart, or Mermaid.",
  "dependencies": [
    "@platejs/code-drawing"
  ],
  "registryDependencies": [
    "popover",
    "button",
    "select"
  ],
  "files": [
    {
      "path": "src/registry/ui/code-drawing-node.tsx",
      "content": "'use client';\n\nimport * as React from 'react';\n\nimport {\n  CodeDrawingElement as BaseCodeDrawingElement,\n} from '@platejs/code-drawing/react';\nimport { VIEW_MODE, type CodeDrawingType, type TCodeDrawingElement, type ViewMode } from '@platejs/code-drawing';\nimport type { PlateElementProps } from 'platejs/react';\nimport { Trash2, DownloadIcon } from 'lucide-react';\n\nimport { useIsMobile } from '@/hooks/use-mobile';\nimport { Button } from '@/components/ui/button';\nimport {\n  Popover,\n  PopoverAnchor,\n  PopoverContent,\n} from '@/components/ui/popover';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\n\nexport function CodeDrawingElement(\n  props: PlateElementProps<TCodeDrawingElement>\n) {\n  const isMobile = useIsMobile();\n  const [languageSelectOpen, setLanguageSelectOpen] = React.useState(false);\n  const [viewModeSelectOpen, setViewModeSelectOpen] = React.useState(false);\n\n  return (\n    <BaseCodeDrawingElement\n      {...props}\n      isMobile={isMobile}\n      renderPopover={({\n        children,\n        onRemove,\n        onDownload,\n        open,\n      }: {\n        children: React.ReactNode;\n        onRemove: () => void;\n        onDownload?: () => void;\n        open: boolean;\n      }) => (\n        <Popover open={open} modal={false}>\n          <PopoverAnchor asChild>{children}</PopoverAnchor>\n          <PopoverContent\n            className=\"w-auto p-1\"\n            contentEditable={false}\n            onOpenAutoFocus={(e) => e.preventDefault()}\n          >\n            <div className=\"flex items-center gap-1\">\n              {onDownload && (\n                <Button\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  className=\"size-8\"\n                  onClick={onDownload}\n                  title=\"Export\"\n                >\n                  <DownloadIcon className=\"size-4\" />\n                </Button>\n              )}\n              <Button\n                size=\"icon\"\n                variant=\"ghost\"\n                className=\"size-8\"\n                onClick={onRemove}\n                title=\"Delete\"\n              >\n                <Trash2 className=\"size-4\" />\n              </Button>\n            </div>\n          </PopoverContent>\n        </Popover>\n      )}\n      renderDrawingTypeSelect={({ value, onChange, onOpenChange }: {\n        value: CodeDrawingType;\n        onChange: (value: CodeDrawingType) => void;\n        onOpenChange?: (open: boolean) => void;\n      }) => (\n        <Select \n          value={value} \n          onValueChange={onChange} \n          open={languageSelectOpen} \n          onOpenChange={(open) => {\n            setLanguageSelectOpen(open);\n            onOpenChange?.(open);\n          }}\n        >\n          <SelectTrigger className=\"w-[120px] bg-muted/50 h-8 text-xs border-0 shadow-none\">\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent className=\"z-[100]\">\n            <SelectItem value=\"PlantUml\">PlantUml</SelectItem>\n            <SelectItem value=\"Graphviz\">Graphviz</SelectItem>\n            <SelectItem value=\"Flowchart\">Flowchart</SelectItem>\n            <SelectItem value=\"Mermaid\">Mermaid</SelectItem>\n          </SelectContent>\n        </Select>\n      )}\n      renderDrawingModeSelect={({ value, onChange, onOpenChange }: {\n        value: ViewMode;\n        onChange: (value: ViewMode) => void;\n        onOpenChange?: (open: boolean) => void;\n      }) => (\n        <Select \n          value={value} \n          onValueChange={onChange} \n          open={viewModeSelectOpen} \n          onOpenChange={(open) => {\n            setViewModeSelectOpen(open);\n            onOpenChange?.(open);\n          }}\n        >\n          <SelectTrigger className=\"w-[80px] bg-muted/50 h-8 text-xs border-0 shadow-none\">\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent className=\"z-[100]\">\n            <SelectItem value={VIEW_MODE.Both}>Both</SelectItem>\n            <SelectItem value={VIEW_MODE.Code}>Code</SelectItem>\n            <SelectItem value={VIEW_MODE.Image}>Image</SelectItem>\n          </SelectContent>\n        </Select>\n      )}\n    />\n  );\n}\n",
      "type": "registry:ui"
    },
    {
      "path": "src/registry/ui/code-drawing-node-static.tsx",
      "content": "import * as React from 'react';\n\nimport type { TCodeDrawingElement } from '@platejs/code-drawing';\nimport type { SlateElementProps } from 'platejs/static';\n\nimport { SlateElement } from 'platejs/static';\n\nexport function CodeDrawingElementStatic({\n  children,\n  ...props\n}: SlateElementProps<TCodeDrawingElement>) {\n  return (\n    <SlateElement\n      className=\"my-4 flex w-full items-stretch\"\n      {...props}\n    >\n      <div className=\"flex flex-col md:flex-row w-full\">\n        <div className=\"flex-1 min-w-0 relative rounded-md bg-muted/50 h-full p-8 pr-4\">\n          <pre className=\"overflow-x-auto font-mono text-sm leading-[normal] [tab-size:2] print:break-inside-avoid m-0\">\n            <code className=\"block w-full\">\n              {(props.element.data?.code as string) || 'Enter your code here...'}\n            </code>\n          </pre>\n        </div>\n        <div className=\"flex-1 min-w-0 relative flex items-center justify-center rounded-md border bg-muted/30 p-4\">\n          <div className=\"text-muted-foreground\">\n            {props.element.data?.drawingType || 'Mermaid'}\n          </div>\n        </div>\n      </div>\n      {children}\n    </SlateElement>\n  );\n}\n",
      "type": "registry:ui"
    }
  ],
  "meta": {
    "docs": [
      {
        "route": "/docs/code-drawing"
      },
      {
        "route": "https://pro.platejs.org/docs/components/code-drawing-node"
      }
    ],
    "examples": [
      "code-drawing-demo"
    ]
  }
}