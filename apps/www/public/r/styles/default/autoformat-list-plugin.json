{
  "dependencies": [
    "@udecode/plate-autoformat",
    "@udecode/plate-basic-marks",
    "@udecode/plate-block-quote",
    "@udecode/plate-code-block",
    "@udecode/plate-heading",
    "@udecode/plate-highlight",
    "@udecode/plate-horizontal-rule",
    "@udecode/plate-list",
    "@udecode/plate-toggle"
  ],
  "files": [
    {
      "path": "components/editor/plugins/autoformat-list-plugin.ts",
      "content": "'use client';\n\nimport type { SlateEditor } from '@udecode/plate';\nimport type {\n  AutoformatBlockRule,\n  AutoformatRule,\n} from '@udecode/plate-autoformat';\n\nimport { ElementApi, isType } from '@udecode/plate';\nimport {\n  autoformatArrow,\n  autoformatLegal,\n  autoformatLegalHtml,\n  autoformatMath,\n  autoformatPunctuation,\n  autoformatSmartQuotes,\n} from '@udecode/plate-autoformat';\nimport { AutoformatPlugin } from '@udecode/plate-autoformat/react';\nimport {\n  BoldPlugin,\n  CodePlugin,\n  ItalicPlugin,\n  StrikethroughPlugin,\n  SubscriptPlugin,\n  SuperscriptPlugin,\n  UnderlinePlugin,\n} from '@udecode/plate-basic-marks/react';\nimport { BlockquotePlugin } from '@udecode/plate-block-quote/react';\nimport { insertEmptyCodeBlock } from '@udecode/plate-code-block';\nimport { CodeBlockPlugin } from '@udecode/plate-code-block/react';\nimport { HEADING_KEYS } from '@udecode/plate-heading';\nimport { HighlightPlugin } from '@udecode/plate-highlight/react';\nimport { HorizontalRulePlugin } from '@udecode/plate-horizontal-rule/react';\nimport { toggleList, unwrapList } from '@udecode/plate-list';\nimport {\n  BulletedListPlugin,\n  ListItemPlugin,\n  NumberedListPlugin,\n  TodoListPlugin,\n} from '@udecode/plate-list/react';\nimport { openNextToggles, TogglePlugin } from '@udecode/plate-toggle/react';\nimport { ParagraphPlugin } from '@udecode/plate/react';\n\nconst preFormat: AutoformatBlockRule['preFormat'] = (editor) =>\n  unwrapList(editor);\n\nconst format = (editor: SlateEditor, customFormatting: any) => {\n  if (editor.selection) {\n    const parentEntry = editor.api.parent(editor.selection);\n\n    if (!parentEntry) return;\n\n    const [node] = parentEntry;\n\n    if (\n      ElementApi.isElement(node) &&\n      !isType(editor, node, CodeBlockPlugin.key)\n    ) {\n      customFormatting();\n    }\n  }\n};\n\nconst formatList = (editor: SlateEditor, elementType: string) => {\n  format(editor, () =>\n    toggleList(editor, {\n      type: elementType,\n    })\n  );\n};\n\nconst autoformatMarks: AutoformatRule[] = [\n  {\n    match: '***',\n    mode: 'mark',\n    type: [BoldPlugin.key, ItalicPlugin.key],\n  },\n  {\n    match: '__*',\n    mode: 'mark',\n    type: [UnderlinePlugin.key, ItalicPlugin.key],\n  },\n  {\n    match: '__**',\n    mode: 'mark',\n    type: [UnderlinePlugin.key, BoldPlugin.key],\n  },\n  {\n    match: '___***',\n    mode: 'mark',\n    type: [UnderlinePlugin.key, BoldPlugin.key, ItalicPlugin.key],\n  },\n  {\n    match: '**',\n    mode: 'mark',\n    type: BoldPlugin.key,\n  },\n  {\n    match: '__',\n    mode: 'mark',\n    type: UnderlinePlugin.key,\n  },\n  {\n    match: '*',\n    mode: 'mark',\n    type: ItalicPlugin.key,\n  },\n  {\n    match: '_',\n    mode: 'mark',\n    type: ItalicPlugin.key,\n  },\n  {\n    match: '~~',\n    mode: 'mark',\n    type: StrikethroughPlugin.key,\n  },\n  {\n    match: '^',\n    mode: 'mark',\n    type: SuperscriptPlugin.key,\n  },\n  {\n    match: '~',\n    mode: 'mark',\n    type: SubscriptPlugin.key,\n  },\n  {\n    match: '==',\n    mode: 'mark',\n    type: HighlightPlugin.key,\n  },\n  {\n    match: '≡',\n    mode: 'mark',\n    type: HighlightPlugin.key,\n  },\n  {\n    match: '`',\n    mode: 'mark',\n    type: CodePlugin.key,\n  },\n];\n\nconst autoformatBlocks: AutoformatRule[] = [\n  {\n    match: '# ',\n    mode: 'block',\n    preFormat,\n    type: HEADING_KEYS.h1,\n  },\n  {\n    match: '## ',\n    mode: 'block',\n    preFormat,\n    type: HEADING_KEYS.h2,\n  },\n  {\n    match: '### ',\n    mode: 'block',\n    preFormat,\n    type: HEADING_KEYS.h3,\n  },\n  {\n    match: '#### ',\n    mode: 'block',\n    preFormat,\n    type: HEADING_KEYS.h4,\n  },\n  {\n    match: '##### ',\n    mode: 'block',\n    preFormat,\n    type: HEADING_KEYS.h5,\n  },\n  {\n    match: '###### ',\n    mode: 'block',\n    preFormat,\n    type: HEADING_KEYS.h6,\n  },\n  {\n    match: '> ',\n    mode: 'block',\n    preFormat,\n    type: BlockquotePlugin.key,\n  },\n  {\n    match: '```',\n    mode: 'block',\n    preFormat,\n    type: CodeBlockPlugin.key,\n    format: (editor) => {\n      insertEmptyCodeBlock(editor, {\n        defaultType: ParagraphPlugin.key,\n        insertNodesOptions: { select: true },\n      });\n    },\n  },\n  {\n    match: '+ ',\n    mode: 'block',\n    preFormat: openNextToggles,\n    type: TogglePlugin.key,\n  },\n  {\n    match: ['---', '—-', '___ '],\n    mode: 'block',\n    type: HorizontalRulePlugin.key,\n    format: (editor) => {\n      editor.tf.setNodes({ type: HorizontalRulePlugin.key });\n      editor.tf.insertNodes({\n        children: [{ text: '' }],\n        type: ParagraphPlugin.key,\n      });\n    },\n  },\n];\n\nconst autoformatLists: AutoformatRule[] = [\n  {\n    match: ['* ', '- '],\n    mode: 'block',\n    preFormat,\n    type: ListItemPlugin.key,\n    format: (editor) => formatList(editor, BulletedListPlugin.key),\n  },\n  {\n    match: [String.raw`^\\d+\\.$ `, String.raw`^\\d+\\)$ `],\n    matchByRegex: true,\n    mode: 'block',\n    preFormat,\n    type: ListItemPlugin.key,\n    format: (editor) => formatList(editor, NumberedListPlugin.key),\n  },\n  {\n    match: '[] ',\n    mode: 'block',\n    type: TodoListPlugin.key,\n  },\n  {\n    match: '[x] ',\n    mode: 'block',\n    type: TodoListPlugin.key,\n    format: (editor) =>\n      editor.tf.setNodes(\n        { checked: true, type: TodoListPlugin.key },\n        {\n          match: (n) => editor.api.isBlock(n),\n        }\n      ),\n  },\n];\n\nexport const autoformatListPlugin = AutoformatPlugin.configure({\n  options: {\n    enableUndoOnDelete: true,\n    rules: [\n      ...autoformatBlocks,\n      ...autoformatMarks,\n      ...autoformatSmartQuotes,\n      ...autoformatPunctuation,\n      ...autoformatLegal,\n      ...autoformatLegalHtml,\n      ...autoformatArrow,\n      ...autoformatMath,\n      ...autoformatLists,\n    ].map((rule) => ({\n      ...rule,\n      query: (editor) =>\n        !editor.api.some({ match: { type: editor.getType(CodeBlockPlugin) } }),\n    })),\n  },\n});\n",
      "type": "registry:component",
      "target": "components/editor/plugins/autoformat-list-plugin.ts"
    }
  ],
  "name": "autoformat-list-plugin",
  "type": "registry:component",
  "$schema": "https://platejs.org/schema/registry-item.json",
  "author": "udecode (https://platejs.org)"
}