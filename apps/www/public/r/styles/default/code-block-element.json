{
  "dependencies": [
    "@udecode/plate-code-block",
    "prismjs"
  ],
  "doc": {
    "description": "A code block with syntax highlighting and language selection.",
    "docs": [
      {
        "route": "/docs/basic-elements"
      },
      {
        "route": "https://pro.platejs.org/docs/components/code-block-element"
      }
    ],
    "examples": [
      "basic-elements-demo"
    ]
  },
  "files": [
    {
      "content": "'use client';\n\nimport React from 'react';\n\nimport { cn, withRef } from '@udecode/cn';\nimport { useCodeBlockElementState } from '@udecode/plate-code-block/react';\n\nimport { CodeBlockCombobox } from './code-block-combobox';\nimport { PlateElement } from './plate-element';\n\nimport './code-block-element.css';\n\nexport const CodeBlockElement = withRef<typeof PlateElement>(\n  ({ children, className, ...props }, ref) => {\n    const { element } = props;\n    const state = useCodeBlockElementState({ element });\n\n    return (\n      <PlateElement\n        ref={ref}\n        className={cn('relative py-1', state.className, className)}\n        {...props}\n      >\n        <pre className=\"overflow-x-auto rounded-md bg-muted px-6 py-8 font-mono text-sm leading-[normal] [tab-size:2]\">\n          <code>{children}</code>\n        </pre>\n\n        {state.syntax && (\n          <div\n            className=\"absolute right-2 top-2 z-10 select-none\"\n            contentEditable={false}\n          >\n            <CodeBlockCombobox />\n          </div>\n        )}\n      </PlateElement>\n    );\n  }\n);\n",
      "path": "plate-ui/code-block-element.tsx",
      "target": "components/plate-ui/code-block-element.tsx",
      "type": "registry:ui"
    },
    {
      "content": ".slate-code_block code[class*='language-'],\n.slate-code_block pre[class*='language-'] {\n  background: hsl(230, 1%, 98%);\n  color: hsl(230, 8%, 24%);\n  font-family: 'Fira Code', 'Fira Mono', Menlo, Consolas, 'DejaVu Sans Mono',\n    monospace;\n  direction: ltr;\n  text-align: left;\n  white-space: pre;\n  word-spacing: normal;\n  word-break: normal;\n  line-height: 1.5;\n  -moz-tab-size: 2;\n  -o-tab-size: 2;\n  tab-size: 2;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n}\n\n/* Selection */\n.slate-code_block code[class*='language-']::-moz-selection,\n.slate-code_block code[class*='language-'] *::-moz-selection,\n.slate-code_block pre[class*='language-'] *::-moz-selection {\n  background: hsl(230, 1%, 90%);\n  color: inherit;\n}\n\n.slate-code_block code[class*='language-']::selection,\n.slate-code_block code[class*='language-'] *::selection,\n.slate-code_block pre[class*='language-'] *::selection {\n  background: hsl(230, 1%, 90%);\n  color: inherit;\n}\n\n/* Code blocks */\n.slate-code_block pre[class*='language-'] {\n  padding: 1em;\n  margin: 0.5em 0;\n  overflow: auto;\n  border-radius: 0.3em;\n}\n\n/* Inline code */\n.slate-code_block :not(pre) > code[class*='language-'] {\n  padding: 0.2em 0.3em;\n  border-radius: 0.3em;\n  white-space: normal;\n}\n\n.token.comment,\n.token.prolog,\n.token.cdata {\n  color: hsl(230, 4%, 64%);\n}\n\n.token.doctype,\n.token.punctuation,\n.token.entity {\n  color: hsl(230, 8%, 24%);\n}\n\n.token.attr-name,\n.token.class-name,\n.token.boolean,\n.token.constant,\n.token.number,\n.token.atrule {\n  color: hsl(35, 99%, 36%);\n}\n\n.token.keyword {\n  color: hsl(301, 63%, 40%);\n}\n\n.token.property,\n.token.tag,\n.token.symbol,\n.token.deleted,\n.token.important {\n  color: hsl(5, 74%, 59%);\n}\n\n.token.selector,\n.token.string,\n.token.char,\n.token.builtin,\n.token.inserted,\n.token.regex,\n.token.attr-value,\n.token.attr-value > .token.punctuation {\n  color: hsl(119, 34%, 47%);\n}\n\n.token.variable,\n.token.operator,\n.token.function {\n  color: hsl(221, 87%, 60%);\n}\n\n.token.url {\n  color: hsl(198, 99%, 37%);\n}\n\n/* HTML overrides */\n.token.attr-value > .token.punctuation.attr-equals,\n.token.special-attr > .token.attr-value > .token.value.css {\n  color: hsl(230, 8%, 24%);\n}\n\n/* CSS overrides */\n.language-css .token.selector {\n  color: hsl(5, 74%, 59%);\n}\n\n.language-css .token.property {\n  color: hsl(230, 8%, 24%);\n}\n\n.language-css .token.function,\n.language-css .token.url > .token.function {\n  color: hsl(198, 99%, 37%);\n}\n\n.language-css .token.url > .token.string.url {\n  color: hsl(119, 34%, 47%);\n}\n\n.language-css .token.important,\n.language-css .token.atrule .token.rule {\n  color: hsl(301, 63%, 40%);\n}\n\n/* JS overrides */\n.language-javascript .token.operator {\n  color: hsl(301, 63%, 40%);\n}\n\n.language-javascript\n  .token.template-string\n  > .token.interpolation\n  > .token.interpolation-punctuation.punctuation {\n  color: hsl(344, 84%, 43%);\n}\n\n/* JSON overrides */\n.language-json .token.operator {\n  color: hsl(230, 8%, 24%);\n}\n\n.language-json .token.null.keyword {\n  color: hsl(35, 99%, 36%);\n}\n\n/* MD overrides */\n.language-markdown .token.url,\n.language-markdown .token.url > .token.operator,\n.language-markdown .token.url-reference.url > .token.string {\n  color: hsl(230, 8%, 24%);\n}\n\n.language-markdown .token.url > .token.content {\n  color: hsl(221, 87%, 60%);\n}\n\n.language-markdown .token.url > .token.url,\n.language-markdown .token.url-reference.url {\n  color: hsl(198, 99%, 37%);\n}\n\n.language-markdown .token.blockquote.punctuation,\n.language-markdown .token.hr.punctuation {\n  color: hsl(230, 4%, 64%);\n  font-style: italic;\n}\n\n.language-markdown .token.code-snippet {\n  color: hsl(119, 34%, 47%);\n}\n\n.language-markdown .token.bold .token.content {\n  color: hsl(35, 99%, 36%);\n}\n\n.language-markdown .token.italic .token.content {\n  color: hsl(301, 63%, 40%);\n}\n\n.language-markdown .token.strike .token.content,\n.language-markdown .token.strike .token.punctuation,\n.language-markdown .token.list.punctuation,\n.language-markdown .token.title.important > .token.punctuation {\n  color: hsl(5, 74%, 59%);\n}\n\n/* General */\n.token.bold {\n  font-weight: bold;\n}\n\n.token.comment,\n.token.italic {\n  font-style: italic;\n}\n\n.token.entity {\n  cursor: help;\n}\n\n.token.namespace {\n  opacity: 0.8;\n}\n\n/* Plugin overrides */\n/* Selectors should have higher specificity than those in the plugins' default stylesheets */\n\n/* Show Invisibles plugin overrides */\n.token.token.tab:not(:empty):before,\n.token.token.cr:before,\n.token.token.lf:before,\n.token.token.space:before {\n  color: hsla(230, 8%, 24%, 0.2);\n}\n\n/* Toolbar plugin overrides */\n/* Space out all buttons and move them away from the right edge of the code block */\ndiv.code-toolbar > .toolbar.toolbar > .toolbar-item {\n  margin-right: 0.4em;\n}\n\n/* Styling the buttons */\ndiv.code-toolbar > .toolbar.toolbar > .toolbar-item > button,\ndiv.code-toolbar > .toolbar.toolbar > .toolbar-item > a,\ndiv.code-toolbar > .toolbar.toolbar > .toolbar-item > span {\n  background: hsl(230, 1%, 90%);\n  color: hsl(230, 6%, 44%);\n  padding: 0.1em 0.4em;\n  border-radius: 0.3em;\n}\n\ndiv.code-toolbar > .toolbar.toolbar > .toolbar-item > button:hover,\ndiv.code-toolbar > .toolbar.toolbar > .toolbar-item > button:focus,\ndiv.code-toolbar > .toolbar.toolbar > .toolbar-item > a:hover,\ndiv.code-toolbar > .toolbar.toolbar > .toolbar-item > a:focus,\ndiv.code-toolbar > .toolbar.toolbar > .toolbar-item > span:hover,\ndiv.code-toolbar > .toolbar.toolbar > .toolbar-item > span:focus {\n  background: hsl(230, 1%, 78%); /* custom: darken(--syntax-bg, 20%) */\n  color: hsl(230, 8%, 24%);\n}\n\n/* Line Highlight plugin overrides */\n/* The highlighted line itself */\n.line-highlight.line-highlight {\n  background: hsla(230, 8%, 24%, 0.05);\n}\n\n/* Default line numbers in Line Highlight plugin */\n.line-highlight.line-highlight:before,\n.line-highlight.line-highlight[data-end]:after {\n  background: hsl(230, 1%, 90%);\n  color: hsl(230, 8%, 24%);\n  padding: 0.1em 0.6em;\n  border-radius: 0.3em;\n  box-shadow: 0 2px 0 0 rgba(0, 0, 0, 0.2); /* same as Toolbar plugin default */\n}\n\n/* Hovering over a linkable line number (in the gutter area) */\n/* Requires Line Numbers plugin as well */\npre[id].linkable-line-numbers.linkable-line-numbers\n  span.line-numbers-rows\n  > span:hover:before {\n  background-color: hsla(230, 8%, 24%, 0.05);\n}\n\n/* Line Numbers and Command Line plugins overrides */\n/* Line separating gutter from coding area */\n.line-numbers.line-numbers .line-numbers-rows,\n.command-line .command-line-prompt {\n  border-right-color: hsla(230, 8%, 24%, 0.2);\n}\n\n/* Stuff in the gutter */\n.line-numbers .line-numbers-rows > span:before,\n.command-line .command-line-prompt > span:before {\n  color: hsl(230, 1%, 62%);\n}\n\n/* Match Braces plugin overrides */\n/* Note: Outline colour is inherited from the braces */\n.rainbow-braces .token.token.punctuation.brace-level-1,\n.rainbow-braces .token.token.punctuation.brace-level-5,\n.rainbow-braces .token.token.punctuation.brace-level-9 {\n  color: hsl(5, 74%, 59%);\n}\n\n.rainbow-braces .token.token.punctuation.brace-level-2,\n.rainbow-braces .token.token.punctuation.brace-level-6,\n.rainbow-braces .token.token.punctuation.brace-level-10 {\n  color: hsl(119, 34%, 47%);\n}\n\n.rainbow-braces .token.token.punctuation.brace-level-3,\n.rainbow-braces .token.token.punctuation.brace-level-7,\n.rainbow-braces .token.token.punctuation.brace-level-11 {\n  color: hsl(221, 87%, 60%);\n}\n\n.rainbow-braces .token.token.punctuation.brace-level-4,\n.rainbow-braces .token.token.punctuation.brace-level-8,\n.rainbow-braces .token.token.punctuation.brace-level-12 {\n  color: hsl(301, 63%, 40%);\n}\n\n/* Diff Highlight plugin overrides */\n/* Taken from https://github.com/atom/github/blob/master/styles/variables.less */\npre.diff-highlight > code .token.token.deleted:not(.prefix),\npre > code.diff-highlight .token.token.deleted:not(.prefix) {\n  background-color: hsla(353, 100%, 66%, 0.15);\n}\n\npre.diff-highlight > code .token.token.deleted:not(.prefix)::-moz-selection,\npre.diff-highlight > code .token.token.deleted:not(.prefix) *::-moz-selection,\npre > code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection,\npre > code.diff-highlight .token.token.deleted:not(.prefix) *::-moz-selection {\n  background-color: hsla(353, 95%, 66%, 0.25);\n}\n\npre.diff-highlight > code .token.token.deleted:not(.prefix)::selection,\npre.diff-highlight > code .token.token.deleted:not(.prefix) *::selection,\npre > code.diff-highlight .token.token.deleted:not(.prefix)::selection,\npre > code.diff-highlight .token.token.deleted:not(.prefix) *::selection {\n  background-color: hsla(353, 95%, 66%, 0.25);\n}\n\npre.diff-highlight > code .token.token.inserted:not(.prefix),\npre > code.diff-highlight .token.token.inserted:not(.prefix) {\n  background-color: hsla(137, 100%, 55%, 0.15);\n}\n\npre.diff-highlight > code .token.token.inserted:not(.prefix)::-moz-selection,\npre.diff-highlight > code .token.token.inserted:not(.prefix) *::-moz-selection,\npre > code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection,\npre > code.diff-highlight .token.token.inserted:not(.prefix) *::-moz-selection {\n  background-color: hsla(135, 73%, 55%, 0.25);\n}\n\npre.diff-highlight > code .token.token.inserted:not(.prefix)::selection,\npre.diff-highlight > code .token.token.inserted:not(.prefix) *::selection,\npre > code.diff-highlight .token.token.inserted:not(.prefix)::selection,\npre > code.diff-highlight .token.token.inserted:not(.prefix) *::selection {\n  background-color: hsla(135, 73%, 55%, 0.25);\n}\n\n/* Previewers plugin overrides */\n/* Based on https://github.com/atom-community/atom-ide-datatip/blob/master/styles/atom-ide-datatips.less and https://github.com/atom/atom/blob/master/packages/one-light-ui */\n/* Border around popup */\n.prism-previewer.prism-previewer:before,\n.prism-previewer-gradient.prism-previewer-gradient div {\n  border-color: hsl(0, 0, 95%);\n}\n\n/* Angle and time should remain as circles and are hence not included */\n.prism-previewer-color.prism-previewer-color:before,\n.prism-previewer-gradient.prism-previewer-gradient div,\n.prism-previewer-easing.prism-previewer-easing:before {\n  border-radius: 0.3em;\n}\n\n/* Triangles pointing to the code */\n.prism-previewer.prism-previewer:after {\n  border-top-color: hsl(0, 0, 95%);\n}\n\n.prism-previewer-flipped.prism-previewer-flipped.after {\n  border-bottom-color: hsl(0, 0, 95%);\n}\n\n/* Background colour within the popup */\n.prism-previewer-angle.prism-previewer-angle:before,\n.prism-previewer-time.prism-previewer-time:before,\n.prism-previewer-easing.prism-previewer-easing {\n  background: hsl(0, 0%, 100%);\n}\n\n/* For angle, this is the positive area (eg. 90deg will display one quadrant in this colour) */\n/* For time, this is the alternate colour */\n.prism-previewer-angle.prism-previewer-angle circle,\n.prism-previewer-time.prism-previewer-time circle {\n  stroke: hsl(230, 8%, 24%);\n  stroke-opacity: 1;\n}\n\n/* Stroke colours of the handle, direction point, and vector itself */\n.prism-previewer-easing.prism-previewer-easing circle,\n.prism-previewer-easing.prism-previewer-easing path,\n.prism-previewer-easing.prism-previewer-easing line {\n  stroke: hsl(230, 8%, 24%);\n}\n\n/* Fill colour of the handle */\n.prism-previewer-easing.prism-previewer-easing circle {\n  fill: transparent;\n}\n",
      "path": "plate-ui/code-block-element.css",
      "target": "components/plate-ui/code-block-element.css",
      "type": "registry:ui"
    },
    {
      "content": "'use client';\n\nimport React, { useState } from 'react';\n\nimport { cn } from '@udecode/cn';\nimport {\n  useCodeBlockCombobox,\n  useCodeBlockComboboxState,\n} from '@udecode/plate-code-block/react';\nimport { Check, ChevronsUpDown } from 'lucide-react';\n\n// Prism must be imported before all language files\nimport Prism from 'prismjs';\n\nimport { Button } from './button';\nimport {\n  Command,\n  CommandEmpty,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from './command';\nimport { Popover, PopoverContent, PopoverTrigger } from './popover';\n\nimport 'prismjs/components/prism-antlr4.js';\nimport 'prismjs/components/prism-bash.js';\nimport 'prismjs/components/prism-c.js';\nimport 'prismjs/components/prism-cmake.js';\nimport 'prismjs/components/prism-coffeescript.js';\nimport 'prismjs/components/prism-cpp.js';\nimport 'prismjs/components/prism-csharp.js';\nimport 'prismjs/components/prism-css.js';\nimport 'prismjs/components/prism-dart.js';\n\n// import 'prismjs/components/prism-django.js';\nimport 'prismjs/components/prism-docker.js';\n\n// import 'prismjs/components/prism-ejs.js';\nimport 'prismjs/components/prism-erlang.js';\nimport 'prismjs/components/prism-git.js';\nimport 'prismjs/components/prism-go.js';\nimport 'prismjs/components/prism-graphql.js';\nimport 'prismjs/components/prism-groovy.js';\nimport 'prismjs/components/prism-java.js';\nimport 'prismjs/components/prism-javascript.js';\nimport 'prismjs/components/prism-json.js';\nimport 'prismjs/components/prism-jsx.js';\nimport 'prismjs/components/prism-kotlin.js';\nimport 'prismjs/components/prism-latex.js';\nimport 'prismjs/components/prism-less.js';\nimport 'prismjs/components/prism-lua.js';\nimport 'prismjs/components/prism-makefile.js';\nimport 'prismjs/components/prism-markdown.js';\nimport 'prismjs/components/prism-matlab.js';\nimport 'prismjs/components/prism-mermaid.js';\nimport 'prismjs/components/prism-objectivec.js';\nimport 'prismjs/components/prism-perl.js';\n\n// import 'prismjs/components/prism-php.js';\nimport 'prismjs/components/prism-powershell.js';\nimport 'prismjs/components/prism-properties.js';\nimport 'prismjs/components/prism-protobuf.js';\nimport 'prismjs/components/prism-python.js';\nimport 'prismjs/components/prism-r.js';\nimport 'prismjs/components/prism-ruby.js';\nimport 'prismjs/components/prism-sass.js';\nimport 'prismjs/components/prism-scala.js';\nimport 'prismjs/components/prism-scheme.js';\nimport 'prismjs/components/prism-scss.js';\nimport 'prismjs/components/prism-sql.js';\nimport 'prismjs/components/prism-swift.js';\nimport 'prismjs/components/prism-tsx.js';\nimport 'prismjs/components/prism-typescript.js';\nimport 'prismjs/components/prism-wasm.js';\nimport 'prismjs/components/prism-yaml.js';\n\nexport { Prism };\n\nconst languages: { label: string; value: string }[] = [\n  { label: 'Plain Text', value: 'text' },\n  { label: 'Bash', value: 'bash' },\n  { label: 'CSS', value: 'css' },\n  { label: 'Git', value: 'git' },\n  { label: 'GraphQL', value: 'graphql' },\n  { label: 'HTML', value: 'html' },\n  { label: 'JavaScript', value: 'javascript' },\n  { label: 'JSON', value: 'json' },\n  { label: 'JSX', value: 'jsx' },\n  { label: 'Markdown', value: 'markdown' },\n  { label: 'SQL', value: 'sql' },\n  { label: 'SVG', value: 'svg' },\n  { label: 'TSX', value: 'tsx' },\n  { label: 'TypeScript', value: 'typescript' },\n  { label: 'WebAssembly', value: 'wasm' },\n  { label: 'ANTLR4', value: 'antlr4' },\n  { label: 'C', value: 'c' },\n  { label: 'CMake', value: 'cmake' },\n  { label: 'CoffeeScript', value: 'coffeescript' },\n  { label: 'C#', value: 'csharp' },\n  { label: 'Dart', value: 'dart' },\n  { label: 'Django', value: 'django' },\n  { label: 'Docker', value: 'docker' },\n  { label: 'EJS', value: 'ejs' },\n  { label: 'Erlang', value: 'erlang' },\n  { label: 'Go', value: 'go' },\n  { label: 'Groovy', value: 'groovy' },\n  { label: 'Java', value: 'java' },\n  { label: 'Kotlin', value: 'kotlin' },\n  { label: 'LaTeX', value: 'latex' },\n  { label: 'Less', value: 'less' },\n  { label: 'Lua', value: 'lua' },\n  { label: 'Makefile', value: 'makefile' },\n  { label: 'Markup', value: 'markup' },\n  { label: 'MATLAB', value: 'matlab' },\n  { label: 'Mermaid', value: 'mermaid' },\n  { label: 'Objective-C', value: 'objectivec' },\n  { label: 'Perl', value: 'perl' },\n  { label: 'PHP', value: 'php' },\n  { label: 'PowerShell', value: 'powershell' },\n  { label: '.properties', value: 'properties' },\n  { label: 'Protocol Buffers', value: 'protobuf' },\n  { label: 'Python', value: 'python' },\n  { label: 'R', value: 'r' },\n  { label: 'Ruby', value: 'ruby' },\n  { label: 'Sass (Sass)', value: 'sass' },\n  // FIXME: Error with current scala grammar\n  { label: 'Scala', value: 'scala' },\n  { label: 'Scheme', value: 'scheme' },\n  { label: 'Sass (Scss)', value: 'scss' },\n  { label: 'Shell', value: 'shell' },\n  { label: 'Swift', value: 'swift' },\n  { label: 'XML', value: 'xml' },\n  { label: 'YAML', value: 'yaml' },\n];\n\nexport function CodeBlockCombobox() {\n  const state = useCodeBlockComboboxState();\n  const { commandItemProps } = useCodeBlockCombobox(state);\n\n  const [open, setOpen] = useState(false);\n  const [value, setValue] = useState('');\n\n  if (state.readOnly) return null;\n\n  const items = languages.filter(\n    (language) =>\n      !value ||\n      language.label.toLowerCase().includes(value.toLowerCase()) ||\n      language.value.toLowerCase().includes(value.toLowerCase())\n  );\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          size=\"xs\"\n          variant=\"ghost\"\n          className=\"h-5 justify-between px-1 text-xs\"\n          aria-expanded={open}\n          role=\"combobox\"\n        >\n          {state.value\n            ? languages.find((language) => language.value === state.value)\n                ?.label\n            : 'Plain Text'}\n          <ChevronsUpDown className=\"ml-2 size-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-[200px] p-0\">\n        <Command shouldFilter={false}>\n          <CommandInput\n            value={value}\n            onValueChange={(value) => setValue(value)}\n            placeholder=\"Search language...\"\n          />\n          <CommandEmpty>No language found.</CommandEmpty>\n\n          <CommandList>\n            {items.map((language) => (\n              <CommandItem\n                key={language.value}\n                className=\"cursor-pointer\"\n                value={language.value}\n                onSelect={(_value) => {\n                  commandItemProps.onSelect(_value);\n                  setOpen(false);\n                }}\n              >\n                <Check\n                  className={cn(\n                    state.value === language.value ? 'opacity-100' : 'opacity-0'\n                  )}\n                />\n                {language.label}\n              </CommandItem>\n            ))}\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n}\n",
      "path": "plate-ui/code-block-combobox.tsx",
      "target": "components/plate-ui/code-block-combobox.tsx",
      "type": "registry:ui"
    }
  ],
  "name": "code-block-element",
  "registryDependencies": [
    "command",
    "plate-element"
  ],
  "type": "registry:ui"
}