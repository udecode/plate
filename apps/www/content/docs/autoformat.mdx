---
title: Autoformat
description: Apply formatting automatically using shortcodes.
docs:
  - route: /docs/basic-elements
    title: Basic elements
  - route: /docs/horizontal-rule
    title: Horizontal rule
  - route: /docs/list
    title: List
  - route: /docs/basic-marks
    title: Basic Marks
  - route: /docs/highlight
    title: Highlight
---

<ComponentPreview name="playground-demo" id="autoformat" />

<PackageInfo>

## Features

- Enables quick content formatting via shortcodes.
- Offers markdown-like inline codes for real-time typing.
- Enhances and simplifies editing by avoiding toolbar buttons and shortcuts for common formatting.
- Auto conversion feature (e.g., **`#`** to H1).
- Provides predefined formatting rules.

**Formatting shortcodes:**

- **`text*`** for bold text.
- **`_text_`** for italicized text.
- **`~~text~~`** for strikethrough text.
- ... and more.

</PackageInfo>

## Installation

```bash
npm install @udecode/plate-autoformat
```

## Usage

```tsx
import { createAutoformatPlugin } from '@udecode/plate-autoformat';

const plugins = [
  // ...otherPlugins,
  createAutoformatPlugin({
    // options
  }),
];
```

### Options

| Name                           | Description                          |
| :----------------------------- | :----------------------------------- |
| `autoformatSmartQuotes`        | Converts `"text"` to `“text”`.       |
|                                | Converts `'text'` to `‘text’`.       |
| `autoformatPunctuation`        | Converts `--` to `—`.                |
|                                | Converts `...` to `…`.               |
|                                | Converts `>>` to `»`.                |
|                                | Converts `<<` to `«`.                |
| `autoformatArrow`              | Converts `->` to `→`.                |
|                                | Converts `<-` to `←`.                |
|                                | Converts `=>` to `⇒`.                |
|                                | Converts `<=` and `≤=` to `⇐`.       |
| `autoformatLegal`              | Converts `(tm)` and `(TM)` to `™`.   |
|                                | Converts `(r)` and `(R)` to `®`.     |
|                                | Converts `(c)` and `(C)` to `©`.     |
| `autoformatLegalHtml`          | Converts `&trade;` to `™`.           |
|                                | Converts `&reg;` to `®`.             |
|                                | Converts `&copy;` to `©`.            |
|                                | Converts `&sect;` to `§`.            |
| `autoformatComparison`         | Converts `!>` to `!>`.               |
|                                | Converts `!<` to `≮`.                |
|                                | Converts `>=` to `≥`.                |
|                                | Converts `<=` to `≤`.                |
|                                | Converts `!>=` to `≱`.               |
|                                | Converts `!<=` to `≰`.               |
| `autoformatEquality`           | Converts `!=` to `≠`.                |
|                                | Converts `==` to `≡`.                |
|                                | Converts `!==` and `≠=` to `≢`.      |
|                                | Converts `~=` to `≈`.                |
|                                | Converts `!~=` to `≉`.               |
| `autoformatFraction`           | Converts `1/2` to `½`.               |
|                                | Converts `1/3` to `⅓`.               |
|                                | ...                                  |
|                                | Converts `7/8` to `⅞`.               |
| `autoformatDivision`           | Converts `//` to `÷`.                |
| `autoformatOperation`          | Converts `+-` to `±`.                |
|                                | Converts `%%` to `‰`.                |
|                                | Converts `%%%` and `‰%` to `‱.       |
|                                | `autoformatDivision` rules.          |
| `autoformatSubscriptNumbers`   | Converts `~0` to `₀`.                |
|                                | Converts `~1` to `₁`.                |
|                                | ...                                  |
|                                | Converts `~9` to `₉`.                |
| `autoformatSubscriptSymbols`   | Converts `~+` to `₊`.                |
|                                | Converts `~-` to `₋`.                |
| `autoformatSuperscriptNumbers` | Converts `^0` to `⁰`.                |
|                                | Converts `^1` to `¹`.                |
|                                | ...                                  |
|                                | Converts `^9` to `⁹`.                |
| `autoformatSuperscriptSymbols` | Converts `^+` to `°`.                |
|                                | Converts `^-` to `⁺`.                |
| `autoformatMath`               | `autoformatComparison` rules         |
|                                | `autoformatEquality` rules           |
|                                | `autoformatOperation` rules          |
|                                | `autoformatFraction` rules           |
|                                | `autoformatSubscriptNumbers` rules   |
|                                | `autoformatSubscriptSymbols` rules   |
|                                | `autoformatSuperscriptNumbers` rules |
|                                | `autoformatSuperscriptSymbols` rules |

```tsx
export interface MatchRange {
  start: string;
  end: string;
}

export interface AutoformatQueryOptions
  extends Omit<AutoformatCommonRule, 'query'> {
  /**
   * `insertText` text.
   */
  text: string;
}

export interface AutoformatCommonRule {
  /**
   * The rule applies when the trigger and the text just before the cursor matches.
   * For `mode: 'block'`: lookup for the end match(es) before the cursor.
   * For `mode: 'text'`: lookup for the end match(es) before the cursor. If `format` is an array, also lookup for the start match(es).
   * For `mode: 'mark'`: lookup for the start and end matches.
   * Note: `'_*'`, `['_*']` and `{ start: '_*', end: '*_' }` are equivalent.
   */
  match: string | string[] | MatchRange | MatchRange[];

  /**
   * Triggering character to autoformat.
   * @default the last character of `match` or `match.end`
   */
  trigger?: string | string[];

  /**
   * If true, insert the triggering character after autoformatting.
   * @default: false
   */
  insertTrigger?: boolean;

  /**
   * Query to allow autoformat.
   */
  query?: (editor: TEditor<V>, options: AutoformatQueryOptions) => boolean;
}

export interface AutoformatBlockRule extends AutoformatCommonRule {
  /**
   * - text: insert text.
   * - block: set block type or custom format.
   * - mark: insert mark(s) between matches.
   * @default 'text'
   */
  mode: 'block';

  match: string | string[];

  /**
   * For `mode: 'block'`: set block type. If `format` is defined, this field is ignored.
   * For `mode: 'mark'`: Mark(s) to add.
   */
  type?: string;

  /**
   * If true, the trigger should be at block start to allow autoformatting.
   * @default true
   */
  triggerAtBlockStart?: boolean;

  /**
   * If true, allow to autoformat even if there is a block of the same type above the selected block.
   * @default false
   */
  allowSameTypeAbove?: boolean;

  /**
   * Function called just before `format`.
   * Generally used to reset the selected block.
   */
  preFormat?: (editor: TEditor<V>) => void;

  /**
   * Custom formatting function.
   * @default setNodes(editor, { type }, { match: (n) => isBlock(editor, n) })
   */
  format?: (editor: TEditor<V>) => void;
}

export interface AutoformatMarkRule extends AutoformatCommonRule {
  mode: 'mark';

  /**
   * Mark(s) to add.
   */
  type: string | string[];

  /**
   * If false, do not format when the string can be trimmed.
   */
  ignoreTrim?: boolean;
}

export interface AutoformatTextRule extends AutoformatCommonRule {
  mode: 'text';

  match: string | string[];

  /**
   * string: the matched text is replaced by that string.
   * string[]: the matched texts are replaced by these strings.
   * function: called when there is a match.
   */
  format:
    | string
    | string[]
    | ((editor: TEditor<V>, options: GetMatchPointsReturnType) => void);
}

export type AutoformatRule =
  | AutoformatBlockRule
  | AutoformatMarkRule
  | AutoformatTextRule;

export interface AutoformatPlugin {
  /**
   * A list of triggering rules.
   */
  rules?: AutoformatRule[];
}
```

### `MatchRange`

Defines a range where an autoformat match begins and ends.

<APIParameters>
  <APIItem name="start" type="string">
    The start of the match range.
  </APIItem>
  <APIItem name="end" type="string">
    The end of the match range.
  </APIItem>
</APIParameters>

### `AutoformatQueryOptions`

Options that are used in an autoformat query.

<APIParameters>
  <APIItem name="text" type="string">
    The text to insert during autoformatting.
  </APIItem>
</APIParameters>

### `AutoformatCommonRule`

Defines common rules that apply to all autoformat modes.

<APIParameters>
  <APIItem name="match" type="string | string[] | MatchRange | MatchRange[]">
    The rule applies when the trigger and the text just before the cursor
    matches. The value can be a string, an array of strings, a `MatchRange`, or
    an array of `MatchRange` objects.
  </APIItem>
  <APIItem name="trigger" type="string | string[]" optional>
    Triggering character(s) to autoformat. The default is the last character of
    the `match` or `match.end`.
  </APIItem>
  <APIItem name="insertTrigger" type="boolean" optional>
    If true, the triggering character is inserted after autoformatting. The
    default value is `false`.
  </APIItem>
  <APIItem
    name="query"
    type="(editor: TEditor<V>, options: AutoformatQueryOptions) => boolean"
    optional
  >
    An optional query function to allow autoformatting.
  </APIItem>
</APIParameters>

### `AutoformatBlockRule`

Defines autoformat rules that apply to blocks.

<APIParameters>
  <APIItem name="mode" type="'block'">
    The autoformat mode. For this rule, it is always `'block'`.
  </APIItem>
  <APIItem name="match" type="string | string[]">
    Defines when the rule applies.
  </APIItem>
  <APIItem name="type" type="string" optional>
    The block type to set. If `format` is defined, this field is ignored. For `mode: 'mark'`, this is the mark(s) to add.
  </APIItem>
  <APIItem name="triggerAtBlockStart" type="boolean" optional>
    If true, the trigger should be at the block start to allow autoformatting. The default value is `true`.
  </APIItem>
  <APIItem name="allowSameTypeAbove" type="boolean" optional>
    If true, autoformatting is allowed even if there is a block of the same type above the selected block. The default value is `false`.
  </APIItem>
  <APIItem name="preFormat" type="(editor: TEditor<V>) => void" optional>
    An optional function called just before `format`. Generally used to reset the selected block.
  </APIItem>
  <APIItem name="format" type="(editor: TEditor<V>) => void" optional>
    An optional custom formatting function. The default is `setNodes(editor, { type }, { match: (n) => isBlock(editor, n) })`.
  </APIItem>
</APIParameters>

### `AutoformatMarkRule`

Defines autoformat rules that apply to marks.

<APIParameters>
  <APIItem name="mode" type="'mark'">
    The autoformat mode. For this rule, it is always `'mark'`.
  </APIItem>
  <APIItem name="type" type="string | string[]">
    The mark(s) to add.
  </APIItem>
  <APIItem name="ignoreTrim" type="boolean" optional>
    If `false`, formatting will not be applied when the string can be trimmed.
  </APIItem>
</APIParameters>

### `AutoformatTextRule`

Defines autoformat rules that apply to text.

<APIParameters>
  <APIItem name="mode" type="'text'">
    The autoformat mode. For this rule, it is always `'text'`.
  </APIItem>
  <APIItem name="match" type="string | string[]">
    Defines when the rule applies.
  </APIItem>
  <APIItem
    name="format"
    type="string | string[] | ((editor: TEditor<V>, options: GetMatchPointsReturnType) => void)"
  >
    Defines the formatting to be applied. It can be a string (the matched text
    is replaced by this string), an array of strings (the matched texts are
    replaced by these strings), or a function called when there is a match.
  </APIItem>
</APIParameters>

### `AutoformatRule`

Represents a single autoformat rule. This can be of type AutoformatBlockRule,
AutoformatMarkRule, or AutoformatTextRule.

### `AutoformatPlugin`

A plugin used to autoformat text based on certain rules.

<APIParameters>
  <APIItem name="rules" type="AutoformatRule[]" optional>
    A list of triggering rules. These rules define the conditions under which
    autoformatting should take place.
  </APIItem>
</APIParameters>

### Source code

- [Plugin](https://github.com/udecode/plate/blob/main/packages/autoformat/src/createAutoformatPlugin.ts)
