{
  "component": false,
  "description": "Learn how to unit test Plate editor and plugins.",
  "featured": false,
  "published": true,
  "title": "Unit Testing Plate",
  "toc": true,
  "body": {
    "raw": "\nThis guide outlines best practices for unit testing Plate plugins and components using `@platejs/test-utils`.\n\n## Installation\n\n```bash\nnpm install @platejs/test-utils\n```\n\n## Setting Up Tests\n\nAdd the JSX pragma at the top of your test file:\n\n```typescript\n/** @jsx jsx */\n\nimport { jsx } from '@platejs/test-utils';\n\njsx; // so Biome doesn't remove unused imports\n```\n\nThis allows you to use JSX syntax for creating editor values.\n\n## Creating Test Cases\n\n### Editor State Representation\n\nUse JSX to represent editor states:\n\n```typescript\nconst input = (\n  <editor>\n    <hp>\n      Hello<cursor /> world\n    </hp>\n  </editor>\n) as any as PlateEditor;\n```\n\nNode elements like `<hp />`, `<hul />`, `<hli />` represent different types of nodes.\n\nSpecial elements like `<cursor />`, `<anchor />`, and `<focus />` represent selection states.\n\n### Testing Transforms\n\n1. Create an input state\n2. Define the expected output state\n3. Use `createPlateEditor` to set up the editor\n4. Apply the transform(s) directly\n5. Assert the editor's new state\n\nExample testing bold formatting:\n\n```typescript\nit('should apply bold formatting', () => {\n  const input = (\n    <editor>\n      <hp>\n        Hello <anchor />\n        world\n        <focus />\n      </hp>\n    </editor>\n  ) as any as PlateEditor;\n\n  const output = (\n    <editor>\n      <hp>\n        Hello <htext bold>world</htext>\n      </hp>\n    </editor>\n  ) as any as PlateEditor;\n\n  const editor = createPlateEditor({\n    plugins: [BoldPlugin],\n    value: input.children,\n    selection: input.selection,\n  });\n\n  // Apply transform directly\n  editor.tf.toggleMark('bold');\n\n  expect(editor.children).toEqual(output.children);\n});\n```\n\n### Testing Selection\n\nTest how operations affect the editor's selection:\n\n```typescript\nit('should collapse selection on backspace', () => {\n  const input = (\n    <editor>\n      <hp>\n        He<anchor />llo wor<focus />ld\n      </hp>\n    </editor>\n  ) as any as PlateEditor;\n\n  const output = (\n    <editor>\n      <hp>\n        He<cursor />ld\n      </hp>\n    </editor>\n  ) as any as PlateEditor;\n\n  const editor = createPlateEditor({\n    value: input.children,\n    selection: input.selection,\n  });\n\n  editor.tf.deleteBackward();\n\n  expect(editor.children).toEqual(output.children);\n  expect(editor.selection).toEqual(output.selection);\n});\n```\n\n## Testing Key Events\n\nWhen you need to test keyboard handlers directly:\n\n```typescript\nit('should call the onKeyDown handler', () => {\n  const input = (\n    <editor>\n      <hp>\n        Hello <anchor />world<focus />\n      </hp>\n    </editor>\n  ) as any as PlateEditor;\n\n  // Create a mock handler to verify it's called\n  const onKeyDownMock = jest.fn();\n\n  const editor = createPlateEditor({\n    value: input.children,\n    selection: input.selection,\n    plugins: [\n      {\n        key: 'test',\n        handlers: {\n          onKeyDown: onKeyDownMock,\n        },\n      },\n    ],\n  });\n\n  // Create the keyboard event\n  const event = new KeyboardEvent('keydown', {\n    key: 'Enter',\n  }) as any;\n\n  // Call the handler directly\n  editor.plugins.test.handlers.onKeyDown({\n    ...getEditorPlugin(editor, { key: 'test' }),\n    event,\n  });\n\n  // Verify the handler was called\n  expect(onKeyDownMock).toHaveBeenCalled();\n});\n```\n\n## Testing Complex Scenarios\n\nFor complex plugins like tables, test various scenarios by directly applying transforms:\n\n```typescript\ndescribe('Table plugin', () => {\n  it('should insert a table', () => {\n    const input = (\n      <editor>\n        <hp>\n          Test<cursor />\n        </hp>\n      </editor>\n    ) as any as PlateEditor;\n\n    const output = (\n      <editor>\n        <hp>Test</hp>\n        <htable>\n          <htr>\n            <htd>\n              <hp>\n                <cursor />\n              </hp>\n            </htd>\n            <htd>\n              <hp></hp>\n            </htd>\n          </htr>\n          <htr>\n            <htd>\n              <hp></hp>\n            </htd>\n            <htd>\n              <hp></hp>\n            </htd>\n          </htr>\n        </htable>\n      </editor>\n    ) as any as PlateEditor;\n\n    const editor = createPlateEditor({\n      value: input.children,\n      selection: input.selection,\n      plugins: [TablePlugin],\n    });\n\n    // Call transform directly\n    editor.tf.insertTable({ rows: 2, columns: 2 });\n\n    expect(editor.children).toEqual(output.children);\n    expect(editor.selection).toEqual(output.selection);\n  });\n});\n```\n\n## Testing Plugins with Options\n\nTest how different plugin options affect behavior:\n\n```typescript\ndescribe('when undo is enabled', () => {\n  it('should undo text format upon delete', () => {\n    const input = (\n      <fragment>\n        <hp>\n          1/<cursor />\n        </hp>\n      </fragment>\n    ) as any;\n\n    const output = (\n      <fragment>\n        <hp>\n          1/4<cursor />\n        </hp>\n      </fragment>\n    ) as any;\n\n    const editor = createPlateEditor({\n      plugins: [\n        AutoformatPlugin.configure({\n          options: {\n            enableUndoOnDelete: true,\n            rules: [\n              {\n                format: 'Â¼',\n                match: '1/4',\n                mode: 'text',\n              },\n            ],\n          },\n        }),\n      ],\n      value: input,\n    });\n\n    // Trigger the autoformat\n    editor.tf.insertText('4');\n\n    // Simulate backspace key\n    const event = new KeyboardEvent('keydown', {\n      key: 'backspace',\n    }) as any;\n\n    // Call the handler\n    editor.getPlugin({key: KEYS.autoformat}).handlers.onKeyDown({\n      ...getEditorPlugin(editor, AutoformatPlugin),\n      event,\n    });\n\n    // With enableUndoOnDelete: true, pressing backspace should restore the original text\n    expect(input.children).toEqual(output.children);\n  });\n});\n```\n\n## Mocking vs. Real Transforms\n\nWhile mocking can be useful for isolating specific behaviors, Plate tests often assess actual editor children and selection after transforms. This approach ensures that plugins work correctly with the entire editor state.\n\n",
    "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var u=(e,l)=>()=>(l||e((l={exports:{}}).exports,l),l.exports),N=(e,l)=>{for(var s in l)r(e,s,{get:l[s],enumerable:!0})},o=(e,l,s,a)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let c of y(l))!F.call(e,c)&&c!==s&&r(e,c,{get:()=>l[c],enumerable:!(a=E(l,c))||a.enumerable});return e};var g=(e,l,s)=>(s=e!=null?p(m(e)):{},o(l||!e||!e.__esModule?r(s,\"default\",{value:e,enumerable:!0}):s,e)),B=e=>o(r({},\"__esModule\",{value:!0}),e);var t=u((w,i)=>{i.exports=_jsx_runtime});var b={};N(b,{default:()=>h,frontmatter:()=>f});var n=g(t()),f={title:\"Unit Testing Plate\",description:\"Learn how to unit test Plate editor and plugins.\"};function d(e){let l={a:\"a\",code:\"code\",div:\"div\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.p,{children:[\"This guide outlines best practices for unit testing Plate plugins and components using \",(0,n.jsx)(l.code,{children:\"@platejs/test-utils\"}),\".\"]}),`\n`,(0,n.jsxs)(l.h2,{id:\"installation\",children:[(0,n.jsx)(l.a,{\"aria-label\":\"Link to section\",className:\"subheading-anchor group/subheading\",\"data-empty\":\"true\",href:\"#installation\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Installation\"]}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{\"data-language\":\"bash\",\"data-theme\":\"default\",__rawString__:`npm install @platejs/test-utils\n`,__npmCommand__:`npm install @platejs/test-utils\n`,__yarnCommand__:`yarn add @platejs/test-utils\n`,__pnpmCommand__:`pnpm add @platejs/test-utils\n`,__bunCommand__:`bun add @platejs/test-utils\n`,children:(0,n.jsx)(l.code,{\"data-language\":\"bash\",\"data-theme\":\"default\",children:(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"npm\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" install\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" @platejs/test-utils\"})]})})})}),`\n`,(0,n.jsxs)(l.h2,{id:\"setting-up-tests\",children:[(0,n.jsx)(l.a,{\"aria-label\":\"Link to section\",className:\"subheading-anchor group/subheading\",\"data-empty\":\"true\",href:\"#setting-up-tests\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Setting Up Tests\"]}),`\n`,(0,n.jsx)(l.p,{children:\"Add the JSX pragma at the top of your test file:\"}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{\"data-language\":\"typescript\",\"data-theme\":\"default\",__rawString__:`/** @jsx jsx */\n\nimport { jsx } from '@platejs/test-utils';\n\njsx; // so Biome doesn't remove unused imports\n`,children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"/** \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"@jsx\"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\" jsx */\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { jsx } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" '@platejs/test-utils'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"jsx; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// so Biome doesn't remove unused imports\"})]})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"This allows you to use JSX syntax for creating editor values.\"}),`\n`,(0,n.jsxs)(l.h2,{id:\"creating-test-cases\",children:[(0,n.jsx)(l.a,{\"aria-label\":\"Link to section\",className:\"subheading-anchor group/subheading\",\"data-empty\":\"true\",href:\"#creating-test-cases\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Creating Test Cases\"]}),`\n`,(0,n.jsxs)(l.h3,{id:\"editor-state-representation\",children:[(0,n.jsx)(l.a,{\"aria-label\":\"Link to section\",className:\"subheading-anchor group/subheading\",\"data-empty\":\"true\",href:\"#editor-state-representation\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Editor State Representation\"]}),`\n`,(0,n.jsx)(l.p,{children:\"Use JSX to represent editor states:\"}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{\"data-language\":\"typescript\",\"data-theme\":\"default\",__rawString__:`const input = (\n  <editor>\n    <hp>\n      Hello<cursor /> world\n    </hp>\n  </editor>\n) as any as PlateEditor;\n`,children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" input\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      Hello\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"cursor \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" world\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" as\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" PlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[\"Node elements like \",(0,n.jsx)(l.code,{children:\"<hp />\"}),\", \",(0,n.jsx)(l.code,{children:\"<hul />\"}),\", \",(0,n.jsx)(l.code,{children:\"<hli />\"}),\" represent different types of nodes.\"]}),`\n`,(0,n.jsxs)(l.p,{children:[\"Special elements like \",(0,n.jsx)(l.code,{children:\"<cursor />\"}),\", \",(0,n.jsx)(l.code,{children:\"<anchor />\"}),\", and \",(0,n.jsx)(l.code,{children:\"<focus />\"}),\" represent selection states.\"]}),`\n`,(0,n.jsxs)(l.h3,{id:\"testing-transforms\",children:[(0,n.jsx)(l.a,{\"aria-label\":\"Link to section\",className:\"subheading-anchor group/subheading\",\"data-empty\":\"true\",href:\"#testing-transforms\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Testing Transforms\"]}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsx)(l.li,{children:\"Create an input state\"}),`\n`,(0,n.jsx)(l.li,{children:\"Define the expected output state\"}),`\n`,(0,n.jsxs)(l.li,{children:[\"Use \",(0,n.jsx)(l.code,{children:\"createPlateEditor\"}),\" to set up the editor\"]}),`\n`,(0,n.jsx)(l.li,{children:\"Apply the transform(s) directly\"}),`\n`,(0,n.jsx)(l.li,{children:\"Assert the editor's new state\"}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"Example testing bold formatting:\"}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{\"data-language\":\"typescript\",\"data-theme\":\"default\",__rawString__:`it('should apply bold formatting', () => {\n  const input = (\n    <editor>\n      <hp>\n        Hello <anchor />\n        world\n        <focus />\n      </hp>\n    </editor>\n  ) as any as PlateEditor;\n\n  const output = (\n    <editor>\n      <hp>\n        Hello <htext bold>world</htext>\n      </hp>\n    </editor>\n  ) as any as PlateEditor;\n\n  const editor = createPlateEditor({\n    plugins: [BoldPlugin],\n    value: input.children,\n    selection: input.selection,\n  });\n\n  // Apply transform directly\n  editor.tf.toggleMark('bold');\n\n  expect(editor.children).toEqual(output.children);\n});\n`,children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"it\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'should apply bold formatting'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" input\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        Hello \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"anchor \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"        world\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        <\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"focus \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  ) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" as\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" PlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" output\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        Hello \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"htext bold\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"world\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"</\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"htext\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  ) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" as\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" PlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" createPlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    plugins: [BoldPlugin],\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    value: input.children,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    selection: input.selection,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // Apply transform directly\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  editor.tf.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toggleMark\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'bold'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  expect\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(editor.children).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toEqual\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(output.children);\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(l.h3,{id:\"testing-selection\",children:[(0,n.jsx)(l.a,{\"aria-label\":\"Link to section\",className:\"subheading-anchor group/subheading\",\"data-empty\":\"true\",href:\"#testing-selection\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Testing Selection\"]}),`\n`,(0,n.jsx)(l.p,{children:\"Test how operations affect the editor's selection:\"}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{\"data-language\":\"typescript\",\"data-theme\":\"default\",__rawString__:`it('should collapse selection on backspace', () => {\n  const input = (\n    <editor>\n      <hp>\n        He<anchor />llo wor<focus />ld\n      </hp>\n    </editor>\n  ) as any as PlateEditor;\n\n  const output = (\n    <editor>\n      <hp>\n        He<cursor />ld\n      </hp>\n    </editor>\n  ) as any as PlateEditor;\n\n  const editor = createPlateEditor({\n    value: input.children,\n    selection: input.selection,\n  });\n\n  editor.tf.deleteBackward();\n\n  expect(editor.children).toEqual(output.children);\n  expect(editor.selection).toEqual(output.selection);\n});\n`,children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"it\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'should collapse selection on backspace'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" input\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        He\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"anchor \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"llo wor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"focus \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"ld\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  ) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" as\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" PlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" output\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        He\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"cursor \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"ld\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  ) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" as\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" PlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" createPlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    value: input.children,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    selection: input.selection,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  editor.tf.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"deleteBackward\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  expect\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(editor.children).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toEqual\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(output.children);\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  expect\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(editor.selection).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toEqual\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(output.selection);\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(l.h2,{id:\"testing-key-events\",children:[(0,n.jsx)(l.a,{\"aria-label\":\"Link to section\",className:\"subheading-anchor group/subheading\",\"data-empty\":\"true\",href:\"#testing-key-events\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Testing Key Events\"]}),`\n`,(0,n.jsx)(l.p,{children:\"When you need to test keyboard handlers directly:\"}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{\"data-language\":\"typescript\",\"data-theme\":\"default\",__rawString__:`it('should call the onKeyDown handler', () => {\n  const input = (\n    <editor>\n      <hp>\n        Hello <anchor />world<focus />\n      </hp>\n    </editor>\n  ) as any as PlateEditor;\n\n  // Create a mock handler to verify it's called\n  const onKeyDownMock = jest.fn();\n\n  const editor = createPlateEditor({\n    value: input.children,\n    selection: input.selection,\n    plugins: [\n      {\n        key: 'test',\n        handlers: {\n          onKeyDown: onKeyDownMock,\n        },\n      },\n    ],\n  });\n\n  // Create the keyboard event\n  const event = new KeyboardEvent('keydown', {\n    key: 'Enter',\n  }) as any;\n\n  // Call the handler directly\n  editor.plugins.test.handlers.onKeyDown({\n    ...getEditorPlugin(editor, { key: 'test' }),\n    event,\n  });\n\n  // Verify the handler was called\n  expect(onKeyDownMock).toHaveBeenCalled();\n});\n`,children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"it\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'should call the onKeyDown handler'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" input\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        Hello \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"anchor \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"world\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"focus \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  ) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" as\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" PlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // Create a mock handler to verify it's called\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" onKeyDownMock\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" jest.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"fn\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" createPlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    value: input.children,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    selection: input.selection,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    plugins: [\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      {\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        key: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'test'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        handlers: {\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          onKeyDown: onKeyDownMock,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        },\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    ],\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // Create the keyboard event\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" event\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" KeyboardEvent\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'keydown'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    key: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Enter'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // Call the handler directly\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  editor.plugins.test.handlers.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"onKeyDown\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    ...\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getEditorPlugin\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(editor, { key: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'test'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }),\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    event,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // Verify the handler was called\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  expect\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(onKeyDownMock).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toHaveBeenCalled\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(l.h2,{id:\"testing-complex-scenarios\",children:[(0,n.jsx)(l.a,{\"aria-label\":\"Link to section\",className:\"subheading-anchor group/subheading\",\"data-empty\":\"true\",href:\"#testing-complex-scenarios\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Testing Complex Scenarios\"]}),`\n`,(0,n.jsx)(l.p,{children:\"For complex plugins like tables, test various scenarios by directly applying transforms:\"}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{\"data-language\":\"typescript\",\"data-theme\":\"default\",__rawString__:`describe('Table plugin', () => {\n  it('should insert a table', () => {\n    const input = (\n      <editor>\n        <hp>\n          Test<cursor />\n        </hp>\n      </editor>\n    ) as any as PlateEditor;\n\n    const output = (\n      <editor>\n        <hp>Test</hp>\n        <htable>\n          <htr>\n            <htd>\n              <hp>\n                <cursor />\n              </hp>\n            </htd>\n            <htd>\n              <hp></hp>\n            </htd>\n          </htr>\n          <htr>\n            <htd>\n              <hp></hp>\n            </htd>\n            <htd>\n              <hp></hp>\n            </htd>\n          </htr>\n        </htable>\n      </editor>\n    ) as any as PlateEditor;\n\n    const editor = createPlateEditor({\n      value: input.children,\n      selection: input.selection,\n      plugins: [TablePlugin],\n    });\n\n    // Call transform directly\n    editor.tf.insertTable({ rows: 2, columns: 2 });\n\n    expect(editor.children).toEqual(output.children);\n    expect(editor.selection).toEqual(output.selection);\n  });\n});\n`,children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"describe\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Table plugin'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  it\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'should insert a table'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" input\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          Test\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"cursor \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    ) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" as\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" PlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" output\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">Test\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"</\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"htable\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"htr\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"            <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"htd\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"              <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"                <\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"cursor \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"              </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"            </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"htd\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"            <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"htd\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"              <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"></\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"            </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"htd\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"          </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"htr\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"htr\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"            <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"htd\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"              <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"></\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"            </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"htd\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"            <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"htd\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"              <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"></\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"            </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"htd\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"          </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"htr\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"htable\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    ) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" as\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" PlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" createPlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      value: input.children,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      selection: input.selection,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      plugins: [TablePlugin],\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // Call transform directly\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    editor.tf.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"insertTable\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ rows: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", columns: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    expect\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(editor.children).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toEqual\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(output.children);\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    expect\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(editor.selection).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toEqual\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(output.selection);\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(l.h2,{id:\"testing-plugins-with-options\",children:[(0,n.jsx)(l.a,{\"aria-label\":\"Link to section\",className:\"subheading-anchor group/subheading\",\"data-empty\":\"true\",href:\"#testing-plugins-with-options\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Testing Plugins with Options\"]}),`\n`,(0,n.jsx)(l.p,{children:\"Test how different plugin options affect behavior:\"}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{\"data-language\":\"typescript\",\"data-theme\":\"default\",__rawString__:`describe('when undo is enabled', () => {\n  it('should undo text format upon delete', () => {\n    const input = (\n      <fragment>\n        <hp>\n          1/<cursor />\n        </hp>\n      </fragment>\n    ) as any;\n\n    const output = (\n      <fragment>\n        <hp>\n          1/4<cursor />\n        </hp>\n      </fragment>\n    ) as any;\n\n    const editor = createPlateEditor({\n      plugins: [\n        AutoformatPlugin.configure({\n          options: {\n            enableUndoOnDelete: true,\n            rules: [\n              {\n                format: '\\xBC',\n                match: '1/4',\n                mode: 'text',\n              },\n            ],\n          },\n        }),\n      ],\n      value: input,\n    });\n\n    // Trigger the autoformat\n    editor.tf.insertText('4');\n\n    // Simulate backspace key\n    const event = new KeyboardEvent('keydown', {\n      key: 'backspace',\n    }) as any;\n\n    // Call the handler\n    editor.getPlugin({key: KEYS.autoformat}).handlers.onKeyDown({\n      ...getEditorPlugin(editor, AutoformatPlugin),\n      event,\n    });\n\n    // With enableUndoOnDelete: true, pressing backspace should restore the original text\n    expect(input.children).toEqual(output.children);\n  });\n});\n`,children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"describe\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'when undo is enabled'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  it\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'should undo text format upon delete'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" input\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"fragment\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"          1\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"cursor \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"fragment\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    ) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" output\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"fragment\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        <\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"          1\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"4\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"cursor \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/>\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"hp\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      </\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"fragment\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    ) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" editor\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" createPlateEditor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      plugins: [\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        AutoformatPlugin.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"configure\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          options: {\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"            enableUndoOnDelete: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"            rules: [\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"              {\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"                format: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\xBC'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"                match: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'1/4'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"                mode: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'text'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"              },\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"            ],\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          },\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        }),\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      ],\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      value: input,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // Trigger the autoformat\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    editor.tf.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"insertText\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'4'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // Simulate backspace key\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" event\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" KeyboardEvent\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'keydown'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      key: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'backspace'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"as\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // Call the handler\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    editor.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getPlugin\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({key: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"KEYS\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".autoformat}).handlers.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"onKeyDown\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      ...\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getEditorPlugin\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(editor, AutoformatPlugin),\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      event,\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // With enableUndoOnDelete: true, pressing backspace should restore the original text\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    expect\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(input.children).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toEqual\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(output.children);\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(l.h2,{id:\"mocking-vs-real-transforms\",children:[(0,n.jsx)(l.a,{\"aria-label\":\"Link to section\",className:\"subheading-anchor group/subheading\",\"data-empty\":\"true\",href:\"#mocking-vs-real-transforms\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Mocking vs. Real Transforms\"]}),`\n`,(0,n.jsx)(l.p,{children:\"While mocking can be useful for isolating specific behaviors, Plate tests often assess actual editor children and selection after transforms. This approach ensures that plugins work correctly with the entire editor state.\"})]})}function h(e={}){let{wrapper:l}=e.components||{};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}return B(b);})();\n;return Component;"
  },
  "_id": "docs/(guides)/unit-testing.mdx",
  "_raw": {
    "sourceFilePath": "docs/(guides)/unit-testing.mdx",
    "sourceFileName": "unit-testing.mdx",
    "sourceFileDir": "docs/(guides)",
    "contentType": "mdx",
    "flattenedPath": "docs/(guides)/unit-testing"
  },
  "type": "Doc",
  "slug": "/docs/docs/unit-testing",
  "slugAsParams": "docs/unit-testing"
}